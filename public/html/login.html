<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://dhbhdrzi4tiry.cloudfront.net/cdn/sites/foundation.min.css">
    <link rel="stylesheet" type="text/css" media="screen" href="../styles/styles.css">

</head>

<body>

    <form class="callout text-center">
        <h2>Become a Member</h2>
        <br>
        <br>
        <div class="floated-label-wrapper">
            <label for="full-name">Full name</label>
            <input type="text" id="full-name" name="full name input" placeholder="Full name">
        </div>
        <br>
        <div class="floated-label-wrapper">
            <label for="email">Email</label>
            <input type="email" id="email" name="email input" placeholder="Email">
        </div>
        <br>
        <div class="floated-label-wrapper">
            <label for="pass">Password</label>
            <input type="password" id="password" name="password input" placeholder="Password">
        </div>
        <br>
        <div class="floated-label-wrapper">
            <label for="pass">Zip Code</label>
            <input type="text" id="zip" name="zip" placeholder="Zip Code">
        </div>
        <br>
        <div class="uploadImage">
            <input type="file" onchange="previewFile()"><br>
            <img src="" height="200" alt="Image preview...">
        </div>

        <br>
        <br>


        <input class="button" id="add-user" type="submit" value="Join!">


    </form>
<!-- jQuery -->
<script src="https://code.jquery.com/jquery.js"></script>

<!-- JavaScript -->
<script>
  // Capture Button Click
  $("#add-user").on("click", function(event) {
    // prevent page from refreshing when form tries to submit itself
    event.preventDefault();

    var newUser = {
        name: $("#full-name").val().trim(),
        email: $("#email").val().trim(),
        password: $("#password").val().trim(),
        location: $("#zip").val().trim()
    };

    $.post("/api/new_user", newUser, function(data) {
        if (data) {
            console.log("New user created!");
            // Need to insert route here to redirect to login page
            // At login page user will now be able to login
        } else {
            console.log("Account creation failed.");
        };
    });

  });

</script>

<script>
    function previewFile() {
        var preview = document.querySelector('img'); //selects the query named img
        var file = document.querySelector('input[type=file]').files[0]; //sames as here
        var reader = new FileReader();

        reader.onloadend = function () {
            preview.src = reader.result;
        }

        if (file) {
            reader.readAsDataURL(file); //reads the data as a URL
        } else {
            preview.src = "";
        }
    }

    previewFile();  //calls the function named previewFile()

    function IsValidZipCode(zip) {
        var isValid = /\d{5}-\d{4}$|^\d{5}$/.test(zip);
        if (isValid)
            alert('Valid ZipCode');
        else {
            alert('Invalid ZipCode');
        }
    }

</script>
</body>


</html>